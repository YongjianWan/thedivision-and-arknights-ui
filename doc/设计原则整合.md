# 战术界面设计原则整合

> 基于设定总纲、美学补丁包、明日方舟风格指南的完整设计规范
> 
> 版本: v3.0 (2026-01-20)

---

## 核心哲学

### 1. 界面即系统 (Interfaces are Systems)

UI不是装饰,是工具。每个组件都有状态、历史、上下文。

- **系统感**: 界面应看起来像是"正在运行的精密设备"
- **物理性**: UI存在于3D空间(Diegetic),不是平面贴纸
- **临床感**: 冷酷、精确、工业化的信息呈现

### 2. Accent即功能 (Accent is Functional)

强调色(`#FF6A00`)是工具,不是装饰。

**只用于**:
- 当前焦点/可操作项
- 关键告警
- 选中状态
- 重要数值指示

**禁止**:
- 大面积背景
- 装饰性图形
- 次要信息

### 3. 稳定的基础设施 (Stable Infrastructure)

布局不能跳动。Empty/Loading/Error状态必须与Data状态共享骨架。

### 4. Ghost Layer纵深 (Diegetic Depth)

UI应有光学厚度,通过三层投影模拟全息效果:
- Main Layer: 主体
- Shadow Layer: 黑色阴影(可读性)
- Ghost Layer: Accent色重影(纵深感)

---

## 视觉层级系统

### 边框等级 (L0-L3)

| Level | 边框 | 用途 | 同屏限制 |
|-------|------|------|----------|
| L0 | 无边框 | 纯内容容器 | 不限 |
| L1 | 0.5px细线 | 常规面板 | 不限 |
| L2 | 2px外框+0.5px内框 | 重要容器 | ≤3个 |
| L3 | 2px accent外框+0.5px内框 | 焦点/告警 | ≤1个 |

**L3规则**:
- 同屏最多1个L3容器
- 只用于当前焦点或关键告警
- 应有锚点装饰(4×4px角落方块)

### 信息层级 (Information Layers)

| Level | 字号 | 透明度 | 字重 | 用途 |
|-------|------|---------|------|------|
| Level 0 (Metadata) | 9-11px | 0.15-0.3 | 300 | 技术参数、坐标 |
| Level 1 (Content) | 14px | 0.7-0.9 | 400 | 标准内容 |
| Level 2 (Focus) | 16-20px | 0.9-1.0 | 500-600 | 标题、重点 |
| Level 3 (Critical) | 36-48px | 1.0 | 700 | HUD数字、告警 |

### 字重信息映射

**原则**: 字重不只是美观,是优先级的视觉编码。

| 等级 | 字重 | 场景 |
|------|------|------|
| Critical | 700-800 (Bold) | 弹药、HP、关键告警 |
| Primary | 500-600 (Medium) | 标题、主要数值 |
| Secondary | 400 (Regular) | 正文、描述 |
| Ambient | 300 (Light) | 装饰文本、背景大字 |

**配合规则**:
- 字号越大,字重可越轻
- 字号越小,字重必须越重
- 装饰性大字用Light(不抢戏)

---

## 颜色系统

### Token规范

```
背景:
- bg.base: #0B0E12 (页面底色)
- bg.elevated: #101622 (面板背景)

文字:
- text.primary: #E6EDF3 (主要)
- text.secondary: #9AA6B2 (次要)
- text.disabled: #4A5568 (禁用)

边框:
- border.strong: #3A4A5A (明显边框)
- border.weak: rgba(42, 58, 70, 0.5) (弱化边框)

强调色:
- accent: #FF6A00 (橙,全境风格)
- accentAlt: #18D1FF (青蓝,方舟风格)

语义色:
- danger: #FF3B30
- success: #32D74B
- warning: #B8860B
```

### 明日方舟风格扩展

| Token | 值 | 用途 |
|-------|-----|------|
| ark.cyan.primary | #18D1FF | 激活态、菜单选中 |
| ark.cyan.sub | #06BBFF | Ghost层、深层装饰 |
| ark.neutral.panel | #181818 | 面板背景 |
| ark.neutral.divider | #4F4F4F | 分割线 |
| ark.neutral.bodyText | #E8E6E3 | 正文(比纯白柔和) |

### 同屏色彩限制

- 高饱和色同时最多2种
- 大面积使用中性色
- 强调色点缀使用

---

## 动效系统

### 时长规范

| 场景 | 时长 | 常量 | 缓动 |
|------|------|------|------|
| Hover/Focus | 100-150ms | `MOTION.duration.fast` | ease-out |
| 点击反馈 | 80ms | `MOTION.duration.instant` | linear |
| 面板展开 | 220ms | `MOTION.duration.base` | default |
| 页面切换 | 320ms | `MOTION.duration.slow` | ease |

### 量化缓动 (Quantized Easing)

**原理**: 模拟老式设备的数据刷新,一格一格跳。

**应用场景**:
- Progress进度条: `steps(8-10)`
- 数字滚动: `steps(5)`
- 透明度变化: `steps(4)`
- Loading状态: `steps(3)`

**不用于**:
- 页面滚动
- 拖拽交互
- 自然物理动画

### 同屏动效限制

**基准**: ≤2个动效同时播放

**背景层**: 必须安静,粒子/扫描线低透明度

**Modal/Drawer打开时**: 通过`body[data-overlay-open]`冻结所有背景动效

### 构建式出现 (Construction Animation)

**原则**: 全息界面是"绘制"出来的,不是"淡入"的。

**三阶段模型** (总时长400-500ms):
1. Phase 1 (0-100ms): 锚点缩放出现
2. Phase 2 (100-250ms): 边框线延伸闭合(SVG stroke-dashoffset)
3. Phase 3 (200-400ms): 内容填充显现

---

## 装饰系统

### Tech Decor (技术装饰文本)

**原理**: 用"无意义"的技术参数填充留白,制造系统运行感。

**规范**:
- 字号: 9-10px
- 字体: 必须等宽
- 透明度: 0.2
- 位置: 角落、边缘,不遮挡内容

**词库**:
```
状态词: SYSTEM_OK | BUFFER_READY | NODE_ACTIVE | LINK_STABLE
动态值: 0x7F3A2E | 127.0.0.1:8080 | [OK] | ████░░
坐标: LAT 31.2304 | LNG 121.4737 | SEC_LEVEL_3
```

### 锚点与连接线

**锚点**:
- 位置: L2/L3面板四角
- 尺寸: 3×3px (L2) / 4×4px (L3)
- 颜色: border.strong (L2) / accent (L3)
- 动效: L3锚点出现时scale 0→1

**引导线**:
- 宽度: 0.5px
- 颜色: border.weak或accent@0.3
- 样式: solid或dashed(4px间隔)
- 用途: 连接父子面板,指示数据流

### 材质叠加

**全局噪点** (NoiseOverlay):
- 64×64px平铺图
- 透明度: 0.03
- 混合模式: overlay
- 性能: 静态图片,不用JS生成

**扫描线**:
- 仅用于HUDMeter/全屏展示
- 间距: 2-3px
- 透明度: 0.03-0.05

**色差** (Chromatic Aberration):
- 仅在错误/告警时触发
- 位移: 1-2px红蓝分离
- 时长: <100ms

---

## 交互规范

### 最小命中区域

| 场景 | 尺寸 |
|------|------|
| 移动端/触屏 | 44×44px |
| 桌面(有hover) | 32×32px |
| 密集工具栏 | 28×28px (必须有hover态) |

### 焦点可见性

**原则**: 焦点必须明显,通过形状/位置变化。

**统一方案**: `.focus-ring`
- 2px accent环
- 2px偏移
- 禁止只用颜色变化

### 长按确认 (HoldButton)

**用途**: 危险操作(删除、重置等)

**规范**:
- 持续时间: 1500-2000ms
- 进度显示: 量化分段(10格)
- 颜色: 强制danger色系
- 反馈: 完成时Ping+短暂glitch

### 状态双重编码

**原理**: 色盲用户分不清红绿,状态必须同时有颜色+形状。

| 状态 | 颜色 | 图标 |
|------|------|------|
| OK/Success | 绿色 | ✓ 勾号 |
| Warning | 黄/橙 | ⚠ 三角 |
| Error | 红色 | ✕ 叉号 |
| Loading | 灰/accent | ◌ 旋转 |
| Offline | 灰色 | 断开图标 |

---

## 性能降级

### 三档渲染模式

| 效果 | full | reduced | minimal |
|------|------|---------|---------|
| GridBackground粒子 | 12条 | 6条 | 关闭 |
| backdrop-filter | 开启 | 静态模糊图 | 纯色 |
| NoiseOverlay | 开启 | 关闭 | 关闭 |
| 构建式动画 | 完整序列 | 简化淡入 | 直接显示 |
| ParticleField | 完整 | 粒子减半 | 静态图 |

### 检测策略

```typescript
const isLowEnd = 
  navigator.hardwareConcurrency <= 4 ||
  navigator.deviceMemory <= 4 ||
  /Android|iPhone|iPad/.test(navigator.userAgent);
```

**用户偏好优先**: `prefers-reduced-motion: reduce` → 直接minimal模式

---

## 故障艺术 (受控)

### 触发规则 (严格限定)

**允许**:
- Critical Error: 网络断开、API失败
- Heavy Action: 不可逆操作瞬间
- Damage: (游戏场景)受击

**禁止**:
- 常规Hover
- 页面加载
- 常驻循环

### 参数限制

| 参数 | 最大值 | 原因 |
|------|--------|------|
| 位移 | 3px | 保持可读 |
| 时长 | 400ms | 不让人烦 |
| 频率 | 每状态变化1次 | 克制 |

---

## 组件规范

### Button Variants

| Variant | 描述 | 背景 | 边框 |
|---------|------|------|------|
| primary | 主操作 | accent填充 | 无 |
| secondary | 次要操作 | 透明 | border.strong |
| ghost | 工具栏 | 透明 | 无 |
| danger | 危险操作 | danger填充 | 无 |
| tactical | 方舟风格 | accentAlt填充 | 无 |
| inverted | 反色效果 | 透明 | white,hover反转 |

### Panel Level使用场景

| Level | 使用场景 | 同屏数量 |
|-------|----------|----------|
| L0 | 纯内容,无需强调 | 不限 |
| L1 | 常规信息分组 | 不限 |
| L2 | 重要功能模块 | ≤3 |
| L3 | 当前焦点/严重告警 | ≤1 |

### HUDMeter设计要点

- 数字必须用等宽字体+tabular-nums
- 应用Ghost Layer三层投影
- 进度条使用quantized缓动
- 可选分段显示(segments参数)
- 字号: 36-48px(数字) + 10-12px(标签)

---

## 图标规范

**强制要求**:
- 风格: Filled/Solid,禁止纯线性
- 颜色: 单色白或单色强调色
- 复杂度: 通过"眯眼测试"——眯眼5秒还能认出
- 边角: 锐利优先

**推荐库**:
- Lucide Icons (Filled变体)
- Phosphor Icons (Fill)
- Material Symbols (Sharp+Filled)

---

## 排版系统

### 字体栈

| 用途 | 字体 | 特点 |
|------|------|------|
| 正文 | Inter | 清晰易读 |
| 代码/数据 | JetBrains Mono | 等宽,字符区分度高 |
| 标题 | DIN Alternate/Roboto Condensed | 紧凑,科技感 |
| HUD数字 | Orbitron | 未来感数字 |
| 战术文字 | Rajdhani | 锐利,军事风格 |
| 装饰衬线 | Didot/Playfair Display | 骑士精神×冷酷科技 |

### 明日方舟字体扩展

| 字体 | 用途 | 样式 |
|------|------|------|
| Bender | 副标题、技术参数 | 切角感,机械感 |
| Oswald | 核心数字、强调标题 | 窄长有力 |
| Novecentosanswide | 超大导航标题 | 超宽,建筑感 |
| Source Han Sans | 中文 | Regular/Bold/Heavy |

### 排版原则

- 标题与正文字号对比≥1.5倍
- Meta文本9-11px,透明度0.3-0.5
- 数字永远等宽+tabular-nums
- 数字应用Ghost Layer

---

## 布局网格

### 8pt网格基准

**所有布局间距必须为8的倍数**:
- 4px: 仅用于微调(rare)
- 8px: 最小间距
- 16px: 标准间距
- 24px: 大间距
- 32px: 区块间距
- 48px: 章节间距

### 非8倍数的例外

仅限以下场景:
- 1px/0.5px边框
- 2px/3px装饰线
- 字号(14px正文可接受)

---

## 验收清单

### 视觉层面
- [ ] 边框是否清晰区分L0-L3?
- [ ] L3同屏是否≤1个?
- [ ] Accent色是否只用于焦点/告警/关键读数?
- [ ] 同屏高饱和色是否≤2种?
- [ ] HUD数字是否有Ghost Layer?
- [ ] 是否有Tech Decor装饰文本且不抢戏?

### 交互层面
- [ ] 所有可点击元素≥32×32px(桌面)或44×44px(移动)?
- [ ] 焦点是否通过形状/位置明显可见?
- [ ] 危险操作是否用HoldButton?
- [ ] 状态是否同时有颜色+图标?

### 动效层面
- [ ] 同屏动效是否≤2个?
- [ ] Progress/Loading是否用quantized缓动?
- [ ] Modal/Drawer打开时背景动效是否冻结?
- [ ] L2/L3面板是否有构建式动画?

### 性能层面
- [ ] 是否实现三档降级模式?
- [ ] 背景模糊是否在低端设备关闭?
- [ ] 动效是否在prefers-reduced-motion时禁用?

### 工程层面
- [ ] tokens.json是否为唯一颜色真源?
- [ ] CSS变量是否自动生成?
- [ ] 组件API是否与文档一致?
- [ ] 是否有类型定义?

---

## 参考文档

- [设定总纲1](./设定总纲1.md) - 基础设计原则
- [设定总纲2](./设定总纲2.md) - Token规范与组件
- [美学补丁包v1.1](./设定文档/美学补丁包%20v1.1.md) - 纵深、材质、量化缓动
- [补丁包2](./设定文档/补丁包2.txt) - 字体、声音、图标
- [补丁包3](./设定文档/补丁包3.txt) - 性能、长按确认、故障艺术
- [明日方舟风格集成指南](./参考/明日方舟风格集成指南.md) - 方舟UI分析
- [技术参考手册](./技术参考手册.md) - Token映射与API
- [理想和现实的差别](./理想和现实的差别.md) - 实施进度

---

**版本**: v3.0 (2026-01-20)
**状态**: 完整整合版,可直接用于开发与审查
