# Arknights Style Integration Guide (明日方舟风格集成指南)

> 深度解析《明日方舟》官网与 UI 设计语言，将其核心美学逻辑集成至本战术终端系统。

---

## 1. 核心设计哲学：临床精密感 (Clinical Precision)

《明日方舟》的 UI 不仅仅是平面的（Flat），它是**高度印刷化**和**工业化**的。它的美感来源于“信息即装饰”。

### 关键准则：
- **极端对比**：极大的标题、极小的 Meta 文本。
- **信息过载错觉**：用无意义的编号、版本号、扫描坐标填充留白，制造系统正在深度运行的假象。
- **几何克制**：严禁圆角（或仅保留 2-3px 的工业微圆角），强调 45 度切割线。

---

## 2. 视觉原子分析 (Visual Atoms)

### 2.1 字体排印 (Typography)

#### 官网字体栈 (Font Stacks)
从官网 CSS 中提取的完整字体系统：

**西文字体：**
- **Bender (Regular/Bold)**: 副标题、技术参数、时间戳。带有强烈的切角感和机械感。
- **Oswald (Medium/DemiBold)**: 核心数字、强调标题。窄长且有力，适合垂直排列。
- **Novecentosanswide (Medium/DemiBold/Bold/UltraBold)**: 超宽标题字体，用于 `HOME`/`MORE` 等导航级标题。建筑感极强，字间距极大。

**中文字体：**
- **Source Han Sans (思源黑体)**: Regular/Medium/Bold/Heavy 四个字重。
  - Regular: 正文
  - Medium: 次要标题、按钮文本
  - Bold: 面板标题
  - Heavy: 超大标题

**集成建议：**
1. **数字显示**: 使用 `Oswald-DemiBold` + `tabular-nums` + `letter-spacing: 0.05em`。
2. **导航/Logo**: 使用 `Novecentosanswide-Bold` + 全大写 + `letter-spacing: 0.25em`。
3. **技术参数**: 使用 `Bender-Regular` + 字号 `0.625rem ~ 0.75rem`。
4. **中文标题**: 使用 `SourceHanSans-Bold`，避免使用颜色区分层级，仅靠字重。

**排印法则：**
- 标题字号至少是正文的 **1.5 倍** 以上（极端对比）。
- Meta 文本（如坐标、版本号）字号应为 `9px ~ 11px`，透明度 `0.3 ~ 0.5`。
- 数字永远等宽（Monospace），配合幽灵投影层。

### 2.2 色彩配置 (Color Mapping)

#### 官网实际调色盘 (From 3000-Line CSS Analysis)
从明日方舟官网 CSS 提取的精确色值：

**主色系统：**
- `#18D1FF` (Primary Cyan): 所有激活状态、悬浮面板主背景色
- `#06BBFF` (Sub-Cyan): 深层装饰、Ghost Layer 投影色
- `#19D1FF` (Cyan Variant): 状态码文本、扫描线

**基础架构色：**
- `#000000` (Pure Black): 根背景
- `#181818` (Panel Black): 模态面板、卡片背景
- `#232323` (Tag Dark): 小型状态标签背景
- `#4F4F4F` (Divider Gray): 装饰分割线
- `#929292` (Weak Line): 辅助线条、网格
- `#E8E6E3` (Body Text): 正文色（比纯白柔和）

**功能色：**
- `#FFFFFF` (Pure White): 核心交互文本、激活的按钮背景
- `rgba(255,255,255,0.3)` (White 30%): 次要装饰线、Before 线条
- `rgba(255,255,255,0.75)` (White 75%): 说明性文本、Meta 信息
- `rgba(0,0,0,0.7)` (Black 70%): 遮罩层标准透明度
- `rgba(0,0,0,0.5)` (Black 50%): Box-shadow 投影色

**集成方案：**
- **#18D1FF (Cyan)**：系统核心状态色。用于：菜单激活、扫描进度、安全连接。
- **#06BBFF (Deep Cyan)**：Ghost Layer 色、深层装饰。
- **#181818 (Panel BG)**：替代纯黑，作为所有面板/卡片背景。
- **#E8E6E3 (Soft White)**：替代 `#FFFFFF`，作为长文本正文色，降低刺眼感。
- **#FF6A00 (Orange)**：仅用于：冲突、关键操作确认（如 HoldButton）、严重的资源短缺。

---

## 3. 技术实现蓝图 (Implementation Blueprint)

### 3.1 伪类装饰系统 (Pseudo-Decor)

#### 三角形/切角装饰 (Triangle Notch)
明日方舟官网大量使用 `border` 技巧而非 `clip-path` 生成三角形装饰：

```css
/* 面板顶部的箭头指示器 */
.ark-panel-arrow::before {
  content: "";
  display: block;
  border: 1rem solid transparent;
  border-bottom-color: #18D1FF; /* 指向下方的三角形 */
  position: absolute;
  bottom: 100%;
  left: 2rem;
}
```

**为什么用 `border` 而不是 `clip-path`？**
- 更好的浏览器兼容性
- 动态色值绑定更简单（CSS 变量直接替换）
- 可以用 `filter: drop-shadow()` 做投影

#### 装饰线系统 (Decoration Lines)
在 `TacticalPanel` 和 `Button` 中增加以下 CSS 模式：

```css
/* 明日方舟风格的水平分割线（带延伸文字） */
.ark-divider-extended {
  display: flex;
  align-items: center;
  font-family: 'Bender-Bold', sans-serif;
  font-size: 0.75rem;
  white-space: nowrap;
}
.ark-divider-extended::after {
  content: "";
  display: inline-block;
  margin-left: 1em;
  flex: auto; /* 自动填充剩余宽度 */
  height: 1px;
  background-color: rgba(255, 255, 255, 0.3);
}

/* 45度斜角装饰块 */
.ark-corner-tag {
  position: relative;
  padding-left: 1.5rem;
}
.ark-corner-tag::before {
  content: "";
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%) rotate(45deg);
  width: 0.5rem;
  height: 0.5rem;
  background-color: #06BBFF; /* 青蓝色 */
}

/* 垂直装饰线（常见于面板边缘） */
.ark-panel::after {
  content: "";
  display: block;
  width: 1px;
  height: 100%;
  background-color: #4F4F4F;
  position: absolute;
  right: 5.75rem; /* 官网实际值 */
  top: 0;
}
```

#### 伪元素 Ghost 投影
配合现有的 Ghost Layer，增加明日方舟风格的"幽灵文字"：

```css
.ark-ghost-text {
  position: relative;
}
/* 主层 */
.ark-ghost-text {
  color: #FFFFFF;
}
/* 阴影层 */
.ark-ghost-text::before {
  content: attr(data-text);
  position: absolute;
  left: 0;
  top: 2px;
  opacity: 0.3;
  filter: blur(3px);
  color: #000000;
  z-index: -1;
}
/* 幽灵层（青蓝色光晕） */
.ark-ghost-text::after {
  content: attr(data-text);
  position: absolute;
  left: 1px;
  top: -2px;
  opacity: 0.1;
  filter: blur(5px);
  color: #06BBFF;
  z-index: -2;
}
```

### 3.2 动态反馈 (Flicker & Shift)

#### Hover 状态：位移+闪烁 (Shift + Flicker)
拒绝"呼吸"动画，改为"跳动"。

**官网实际行为：**
```css
/* 按钮 Hover：颜色反转 + 极短过渡 */
.ark-button {
  color: #FFFFFF;
  background-color: #000000;
  transition: color 0.3s, background-color 0.3s;
}
.ark-button:hover {
  color: #000000;
  background-color: #FFFFFF;
}

/* 图标按钮：缩放 + 透明度 */
.ark-icon-button {
  opacity: 0.7;
  transition: opacity 0.3s, transform 0.2s ease;
}
.ark-icon-button:hover {
  opacity: 1;
  transform: scale(1.05);
}
```

**本项目增强方案：**
- **Hover**：不是变色，是产生 `translate(4px, -2px)` 的位移，并伴随一次极短的 `opacity` 闪烁（模拟磁头寻道）：

```css
.ark-shift-button {
  transition: transform 0.15s ease, opacity 0.1s;
}
.ark-shift-button:hover {
  transform: translate(4px, -2px);
  animation: flicker 0.15s steps(2);
}

@keyframes flicker {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.85; }
}
```

#### Entrance 动画：错层淡入 (Staggered Fade)
列表项应采用"错层淡入"，即 `opacity: 0 + translateX(20%)` -> `opacity: 1 + translateX(0)`：

```css
.ark-list-item {
  opacity: 0;
  transform: translateX(20%);
  animation: slideInStagger 0.6s ease forwards;
}

/* 用 nth-child 制造延迟 */
.ark-list-item:nth-child(1) { animation-delay: 0s; }
.ark-list-item:nth-child(2) { animation-delay: 0.1s; }
.ark-list-item:nth-child(3) { animation-delay: 0.2s; }

@keyframes slideInStagger {
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
```

#### 面板开启动画 (Panel Slide)
**官网实测数据：**
- 右侧滑入面板：`transform: translateX(100%)` -> `translateX(0)`, `0.3s`
- 下拉面板：`transform: translateY(-2rem)` -> `translateY(0)`, `0.3s`
- 所有过渡都带有 `opacity: 0 -> 1` 的配合

**移动端特殊处理：**
```css
@media (orientation: portrait) {
  .ark-panel {
    /* 移动端改为 scale 缩放 */
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 0;
  }
  .ark-panel.visible {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}
```

---

## 4. 组件改造建议 (Component Evolution)

### 4.1 HUDMeter 进化
**现状问题：** 缺少足够的"信息密度"和"系统感"。

**改造方案：**
1. **增加底部 Meta 层**：在数值下方增加两行极小的装饰文字：
   ```
   SYNC_RATE: 100% | BUFFER_ADDR: 0x7F3A2E
   LAST_UPDATE: 2026-01-18T15:32:47Z
   ```
   字号 `9px`，透明度 `0.3`，字体 `Bender-Regular`。

2. **数字层 Ghost 效果**：数字应用 `ghost-layer`（青蓝色光晕 + 黑色阴影）。

3. **单位标注**：在大数字旁边用极小字号标注单位，如 `98 %` 而非 `98%`。

### 4.2 TacticalPanel 进化
**现状问题：** 边框过于规整，缺少"切割感"。

**改造方案：**
1. **切角装饰**：在右上角或左下角通过 `clip-path` 切掉一个小角：
   ```css
   .tactical-panel-ark {
     clip-path: polygon(
       0 0, 
       calc(100% - 1rem) 0, 
       100% 1rem, 
       100% 100%, 
       0 100%
     );
   }
   ```

2. **角部锚点**：在切口处放置一个 `4x4px` 的实心青蓝色块：
   ```css
   .tactical-panel-ark::before {
     content: "";
     position: absolute;
     right: 0;
     top: 0;
     width: 4px;
     height: 4px;
     background-color: #18D1FF;
   }
   ```

3. **标题装饰线**：标题前加 `4px` 高的垂直青蓝色条：
   ```css
   .tactical-panel-title::before {
     content: "";
     display: inline-block;
     width: 4px;
     height: 1.2em;
     background-color: #18D1FF;
     margin-right: 0.75rem;
     vertical-align: middle;
   }
   ```

### 4.3 标签页 (Tabs) 重构
**现状问题：** 使用下划线，过于传统。

**改造方案：**
1. **激活块背景**：激活的 Tab 背后出现一个青蓝色的背景块（而非下划线）：
   ```css
   .ark-tab {
     position: relative;
     padding: 0.75rem 1.5rem;
     transition: color 0.3s;
   }
   .ark-tab.active::before {
     content: "";
     position: absolute;
     left: 0;
     top: 0;
     width: 100%;
     height: 100%;
     background-color: #18D1FF;
     z-index: -1;
     animation: tabActivate 0.3s steps(5) forwards;
   }
   
   @keyframes tabActivate {
     from { transform: scaleX(0); }
     to { transform: scaleX(1); }
   }
   ```

2. **文字颜色反转**：激活时文字从 `#FFFFFF` 变为 `#000000`。

### 4.4 Button 增强
**官网实际行为分析：**
- 所有按钮默认为 **黑底白字**（`bg: #000`, `text: #FFF`）。
- Hover 时完全反转为 **白底黑字**（`bg: #FFF`, `text: #000`）。
- 过渡时间固定为 `0.3s`。
- 图标按钮额外增加 `scale(1.05)` 效果。

**集成建议：**
```tsx
// Button.tsx 新增 variant
export type ButtonVariant = 
  | 'primary'    // 现有：橙色填充
  | 'secondary'  // 现有：边框
  | 'ghost'      // 现有：纯文字
  | 'danger'     // 现有：红色
  | 'ark';       // 新增：明日方舟风格黑白反转

// CSS
.btn-ark {
  background-color: #000000;
  color: #FFFFFF;
  border: 1px solid #FFFFFF;
  transition: background-color 0.3s, color 0.3s;
}
.btn-ark:hover {
  background-color: #FFFFFF;
  color: #000000;
}
```

### 4.5 Drawer/Modal 面板动画
**官网实测：**
- 右侧抽屉：`translateX(100%)` -> `translateX(0)`, `0.3s`
- 中央弹窗：移动端使用 `scale(1.2)` -> `scale(1)`, `0.3s`
- 背景遮罩：`backdrop-filter: blur(0.5rem)` + `rgba(0,0,0,0.7)`

**本项目适配：**
```tsx
// Drawer.tsx
const slideVariants = {
  hidden: { x: '100%', opacity: 0 },
  visible: { x: 0, opacity: 1, transition: { duration: 0.3 } }
};

// Modal.tsx (移动端)
const scaleVariants = {
  hidden: { scale: 1.2, opacity: 0 },
  visible: { scale: 1, opacity: 1, transition: { duration: 0.3 } }
};
```

---

## 5. 核心技术细节 (Technical Insights)

### 5.1 投影系统 (Shadow System)
明日方舟不使用柔和的投影，而是**深且明确**的投影：

```css
/* 标签/小组件投影 */
box-shadow: 0 0.75rem 0.5rem rgba(0, 0, 0, 0.5);

/* 面板投影（更深） */
box-shadow: 0 1rem 2rem rgba(0, 0, 0, 0.8);
```

**关键参数：**
- Y 轴偏移：`0.75rem ~ 1rem`（12px ~ 16px）
- 模糊半径：`0.5rem ~ 2rem`
- 颜色：`rgba(0,0,0,0.5)` 或更深

### 5.2 响应式断点 (Responsive Breakpoints)
官网使用 `orientation` 而非 `width` 作为主要断点：

```css
@media (orientation: portrait) {
  /* 竖屏（移动端）特殊处理 */
}
```

**关键差异：**
- **横屏（桌面）**: 侧边栏固定宽度 `14.75rem`，垂直滚动
- **竖屏（移动）**: 侧边栏居中弹出，背景遮罩，缩放动画

### 5.3 垂直排版 (Vertical Text)
大量使用 `writing-mode: vertical-rl` 处理侧边文字：

```css
.ark-vertical-label {
  writing-mode: vertical-rl;
  text-orientation: mixed; /* 数字保持横向 */
  letter-spacing: 0.1em;
}
```

**使用场景：**
- 页面编号（如 `01`, `02`）
- 章节标题的副标题
- 装饰性的技术参数

### 5.4 图标按钮尺寸规律
分析代码中的图标尺寸，发现明确的层级：

| 类型 | 桌面尺寸 | 移动尺寸 | 用途 |
|------|---------|---------|------|
| 小图标 | `2rem` (32px) | `4rem` (64px) | 社交媒体链接 |
| 中图标 | `3rem` (48px) | `5rem` (80px) | 二级菜单 |
| 大图标 | `4.5rem` (72px) | `6rem` (96px) | 主要功能入口 |

**容器尺寸：**
- 桌面图标容器：`3.375rem x 3.375rem` (54px)
- 移动图标容器：`6.375rem x 6.375rem` (102px)
- 容器背景：`#000` + `1px solid #FFF`（移动端）

---

## 6. tokens.json 集成清单

需要新增或修改的 Design Token：

```json
{
  "color": {
    "ark": {
      "cyan": {
        "primary": "#18D1FF",
        "sub": "#06BBFF",
        "ghost": "#19D1FF"
      },
      "neutral": {
        "panel": "#181818",
        "tag": "#232323",
        "divider": "#4F4F4F",
        "weakLine": "#929292",
        "bodyText": "#E8E6E3"
      }
    }
  },
  "shadow": {
    "ark": {
      "tag": "0 0.75rem 0.5rem rgba(0, 0, 0, 0.5)",
      "panel": "0 1rem 2rem rgba(0, 0, 0, 0.8)"
    }
  },
  "motion": {
    "ark": {
      "panel": "0.3s",
      "hover": "0.3s",
      "flicker": "0.15s"
    }
  },
  "font": {
    "ark": {
      "title": "Novecentosanswide-Bold, sans-serif",
      "number": "Oswald-DemiBold, monospace",
      "tech": "Bender-Regular, monospace",
      "body": "SourceHanSans-Medium, sans-serif"
    }
  }
}
```

---

## 7. 验收标准 (Acceptance Criteria)

### 视觉验收：
- [ ] 页面中是否有一眼望去不具备功能但"看起来极具迷惑性"的技术参数（如坐标、内存地址）？
- [ ] 所有的直线交界处是否锐利（无圆角，或仅 2-3px 微圆角）？
- [ ] 在没有图片的情况下，纯靠文字排版是否已经具备足够的仪式感？
- [ ] 大标题与小 Meta 文本的尺寸对比是否达到 **1.5倍** 以上？
- [ ] 是否存在至少一处 45 度切角或三角形装饰？

### 技术验收：
- [ ] 是否使用了 `#18D1FF` 作为所有"激活"状态的统一色？
- [ ] 面板开启动画是否为 `0.3s` 过渡（而非更长）？
- [ ] Hover 状态是否触发了"颜色反转"或"位移+闪烁"？
- [ ] 是否使用了 `box-shadow: 0 0.75rem 0.5rem rgba(0,0,0,0.5)` 或更深的投影？
- [ ] 是否使用了 `::before` 或 `::after` 伪元素生成装饰线？

### 交互验收：
- [ ] 列表项是否使用"错层淡入"而非"整体淡入"？
- [ ] 移动端面板是否使用 `scale(1.2) -> scale(1)` 而非平移？
- [ ] 图标按钮 Hover 时是否有 `scale(1.05)` 或 `opacity: 0.7 -> 1` 的反馈？

---

## 8. 实施优先级 (Implementation Priority)

### P0（立即执行）：
1. 更新 `tokens.json`，新增 `color.ark` 和 `shadow.ark` 分类。
2. 修改 `Button` 组件，新增 `variant="ark"` 黑白反转样式。
3. 为 `TacticalPanel` 增加切角 `clip-path` 和角部锚点。

### P1（本周完成）：
1. 重构 `Tabs` 组件，使用"激活块背景"替代下划线。
2. 为 `HUDMeter` 增加底部 Meta 层（技术参数装饰文字）。
3. 调整全局 `box-shadow` 为明日方舟标准（更深、更明确）。

### P2（迭代优化）：
1. 增加 `writing-mode: vertical-rl` 垂直文字装饰组件。
2. 实现"错层淡入"动画的通用工具函数。
3. 为 `Drawer` 和 `Modal` 增加移动端 `scale` 动画变体。

---

## 9. 参考资料 (References)

- **官网 CSS 源文件**: `doc/明日方舟的网站的css`（3000+ 行）
- **字体文件**: Bender, Oswald, Novecentosanswide, Source Han Sans
- **核心配色**: `#18D1FF` (Cyan), `#181818` (Panel BG), `#06BBFF` (Ghost)
- **动画时长**: 面板 `0.3s`, Hover `0.3s`, Flicker `0.15s`
